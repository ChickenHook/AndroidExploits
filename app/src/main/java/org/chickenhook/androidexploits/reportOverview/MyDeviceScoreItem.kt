package org.chickenhook.androidexploits.reportOverview

import android.content.Intent
import android.os.Bundle
import android.view.View
import android.view.ViewGroup
import android.widget.Button
import android.widget.ProgressBar
import android.widget.TextView
import androidx.navigation.fragment.findNavController
import androidx.recyclerview.widget.DividerItemDecoration
import androidx.recyclerview.widget.LinearLayoutManager
import androidx.recyclerview.widget.RecyclerView
import org.chickenh00k.androidexploits.common.Report
import org.chickenhook.androidexploits.DeviceReportAdapter
import org.chickenhook.androidexploits.IncidenceFragment
import org.chickenhook.androidexploits.R

class MyDeviceScoreItem(val score: Double) : IReportOverviewItem() {

    class ViewHolder(parent: ViewGroup, resId: Int) : IReportOverviewItemViewHolder(parent, resId) {
        override fun doBind(item: IReportOverviewItem) {
            if (!(item is MyDeviceScoreItem)) {
                throw java.lang.RuntimeException("Invalid object type <${item}>")
            }
            itemView.findViewById<TextView>(R.id.my_device_score_item_score_text)?.let {
                it.text = (item.score * 10.0).toInt().toString()
            }
            val pb = itemView.findViewById<ProgressBar>(R.id.my_device_score_item_score_pb)
            pb.max = 100
            pb.progress = (10.0 * item.score).toInt()
            val anim = ProgressBarAnimation(pb, 0.0f, pb.progress.toFloat())
            anim.duration = 1000
            pb.startAnimation(anim)
        }
    }

    companion object {
        val TYPE_ID = 0
    }
}